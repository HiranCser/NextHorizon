
<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NextHorizon ML Pipeline</title>
<style>body{font-family: Arial, Helvetica, sans-serif; margin: 28px;} pre{background:#f6f8fa;padding:12px;border-radius:6px;overflow:auto} code{font-family: monospace;}</style>
</head>
<body>
<h1>NextHorizon â€” Machine Learning Pipeline Overview</h1>
<p>This document describes the end-to-end machine learning pipeline in the NextHorizon project. It explains how data is collected, cleaned, preprocessed, how features and embeddings are generated, how models are trained and evaluated, how predictions and recommendations are served, and how diagnostics and observability are implemented.</p>
<p>Where relevant, file paths in the repository are referenced so engineers can find the implementation.</p>
<hr />
<h2>Table of Contents</h2>
<ul>
<li>Overview</li>
<li>Data Collection</li>
<li>Data Cleaning &amp; Validation</li>
<li>Preprocessing &amp; Feature Engineering</li>
<li>Text Enrichment, Readability, and NLP Features</li>
<li>TF-IDF and Vectorization</li>
<li>Embeddings: what they are and how we compute them</li>
<li>Vector stores and nearest-neighbor search</li>
<li>Train / Test datasets and experiment management</li>
<li>Prediction &amp; Recommendation Algorithms</li>
<li>Evaluation, Metrics, and Validation</li>
<li>Serving, UI Integration, and Diagnostics</li>
<li>Sequence Diagrams</li>
<li>Next Steps and Operational Considerations</li>
</ul>
<hr />
<p><strong>Note:</strong> Where code is present in the repository, this document references the existing implementations:<br />
- Cleaning: <code>utils/data_enhancer.py</code>, <code>utils/data_cleaner.py</code><br />
- Feature engineering: <code>utils/feature_engineering.py</code><br />
- Embedding compute: <code>scripts/precompute_embeddings.py</code>, <code>ai/openai_client.py</code><br />
- Diagnostics UI: <code>ui/diagnostics.py</code>, <code>app.py</code><br />
- Precompute runner scripts: <code>scripts/precompute_features.py</code></p>
<p>For direct code references, see these key functions in the repository:<br />
- <code>utils/data_cleaner.py</code>:<br />
  - <code>run_full_clean(path, dataset_type, out_clean_path)</code> â€” full CSV cleaning orchestrator.<br />
  - <code>clean_training_dataframe(df, provider_map)</code> â€” provider normalization and numeric imputation.<br />
  - <code>validate_with_schema(df, dataset_type)</code> â€” pandera schema validation.<br />
- <code>utils/feature_engineering.py</code>:<br />
  - <code>run_pipeline(path, out_csv, out_prefix, enrich=True)</code> â€” feature pipeline runner that writes TF-IDF and report JSON.<br />
  - <code>compute_tfidf(df, max_features=2048)</code> â€” generate TF-IDF sparse matrix and vectorizer.<br />
  - <code>enrich_text_features(df)</code> â€” readability and spaCy NER/POS enrichment.</p>
<h2>Overview</h2>
<p>NextHorizon converts raw CSV datasets (training and job descriptions) into cleaned datasets, engineered features, TF-IDF artifacts, and vector embeddings. These artifacts are used for downstream tasks including role prediction, skill-gap analysis, and learning-path recommendations.</p>
<p>High-level stages:<br />
- Data collection (CSV ingestion, optional provider API enrichment)<br />
- Data cleaning and normalization<br />
- Feature engineering (numeric derivations, TF-IDF, NLP enrichments)<br />
- Embedding generation and storage<br />
- Training/evaluation of models and heuristics<br />
- Serving recommendations through the Streamlit UI and diagnostics</p>
<h2>Data Collection</h2>
<p>Sources:<br />
- Local CSVs in <code>build_training_dataset/training_database.csv</code> and <code>build_jd_dataset/jd_database.csv</code> are primary sources of ground truth.<br />
- Additional provider mappings or enrichment data: <code>build_training_dataset/skill_list.csv</code>, <code>build_jd_dataset/role_list.csv</code>.</p>
<p>Ingest process:<br />
- Scripts and functions read CSV files into pandas DataFrames.<br />
- The pipeline preserves raw copies and writes cleaned artifacts to <code>*.clean.csv</code> alongside features and reports.</p>
<p>Operational notes:<br />
- Keep original raw files as immutable checkpoints. All cleaning steps write to new paths (e.g. <code>training_database.clean.csv</code>).<br />
- When adding APIs for provider metadata, implement rate-limited batch enrichment and cache results locally.</p>
<h2>Data Cleaning &amp; Validation</h2>
<p>Goals:<br />
- Remove or fix malformed rows<br />
- Normalize categorical fields (e.g., provider names)<br />
- Impute missing numeric fields (e.g., <code>hours</code>, <code>rating</code>)<br />
- Enforce schema constraints</p>
<p>Implementation details:<br />
- <code>utils/data_cleaner.py</code> contains cleaning routines used by pipeline runners.<br />
- Schema validation uses <code>pandera</code> schemas to enforce column types and ranges. Care is taken to write element-wise-safe checks (avoid scalar-only pandas calls in element-wise lambdas).<br />
- Provider normalization uses a mapping file and fuzzy matching fallback implemented in <code>utils/data_cleaner.py</code>.<br />
- Imputation strategy:<br />
  - For <code>hours</code> and <code>rating</code>, impute with provider-specific median if available.<br />
  - Fallback to global median.<br />
  - Final fallback to 0.0 if no numeric data exists for a group.<br />
- Numeric clamping: ratings are clamped to a specified range (for example 0â€“5) after imputation.</p>
<p>Why these choices:<br />
- Provider-specific imputation preserves per-provider biases in course length or ratings.<br />
- Pandera provides reproducible schema guarantees and fails fast in CI when data drift violates expectations.</p>
<h2>Preprocessing &amp; Feature Engineering</h2>
<p>Goals:<br />
- Convert raw text and metadata into numeric features suitable for ML and nearest-neighbor search.<br />
- Produce artifacts that can be re-used at serving time (TF-IDF vectorizers, embeddings files).</p>
<p>Common transformations performed (in <code>utils/feature_engineering.py</code>):<br />
- Derived numeric features:<br />
  - <code>title_length</code>, <code>description_length</code>, <code>num_skills_listed</code>, <code>rating_numeric</code> (normalized), <code>hours_numeric</code> (normalized).<br />
- Categorical encodings:<br />
  - Provider encoded via mapping; more advanced categorical features can be one-hot or embedding encodings.<br />
- Text cleaning:<br />
  - Lowercasing, punctuation removal (where relevant), whitespace normalization.</p>
<p>Feature pipeline:<br />
- <code>scripts/precompute_features.py</code> wraps the feature pipeline and calls <code>run_pipeline()</code> which:<br />
  - Reads the cleaned CSV (<code>*.clean.csv</code>).<br />
  - Computes derived numeric &amp; categorical features.<br />
  - Computes TF-IDF matrix and saves vectorizer (<code>*.tfidf.pkl</code>) and sparse matrix (<code>*.tfidf.npz</code>).<br />
  - Enriches text using readability heuristics and (optionally) spaCy NER/POS features.<br />
  - Writes <code>*.features.csv</code> and a <code>*.report.json</code> with metadata (vocab size, per-column missingness, spaCy availability).</p>
<p>Implementation notes:<br />
- TF-IDF artifacts are persisted so the same vocabulary can be reused at query/serve time to ensure vector space compatibility.<br />
- Sparse matrices are saved using <code>scipy.sparse</code> to keep storage efficient.</p>
<h2>Text Enrichment, Readability, and NLP Features</h2>
<p>What we compute:<br />
- Readability scores (e.g., Flesch reading ease) using <code>textstat</code> where available.<br />
- Named Entity Recognition (NER) counts and top entities using spaCy (<code>en_core_web_sm</code>), loaded lazily to avoid heavy startup costs.<br />
- Part-of-speech (POS) distributions to capture syntactic signal.</p>
<p>Where it lives:<br />
- <code>utils/feature_engineering.py</code> contains <code>_readability_score()</code> and <code>_spacy_entities_and_pos()</code> helpers.<br />
- The diagnostics UI shows whether spaCy model is available (<code>spacy_model_available</code> in the report JSON).</p>
<p>Operational tip:<br />
- Install spaCy model as part of environment setup (see <code>setup.sh</code>) but guard pipeline so it runs without the model (skip NER features) for environments with constrained resources.</p>
<h2>TF-IDF and Vectorization</h2>
<p>Why TF-IDF:<br />
- TF-IDF captures term importance relative to the corpus and works well for classic sparse retrieval and feature inputs for shallow models.</p>
<p>How we compute it:<br />
- <code>utils/feature_engineering.compute_tfidf()</code> fits a <code>TfidfVectorizer</code> across a chosen text column (e.g., <code>title + description</code>).<br />
- Save outputs:<br />
  - <code>*.tfidf.pkl</code> â€” the fitted vectorizer (pickle)<br />
  - <code>*.tfidf.npz</code> â€” the sparse TF-IDF matrix for the corpus<br />
  - Record <code>tfidf_vocab_size</code> in the pipeline report</p>
<p>Serving considerations:<br />
- Use the saved vectorizer to transform incoming queries at runtime to ensure feature space alignment.<br />
- For fast approximate-nearest-neighbor (ANN) retrieval, convert sparse TF-IDF vectors to dense (if small) or use ANN libraries that support sparse or hashed vectors.</p>
<h2>Embeddings: What they are and how we compute them</h2>
<p>What are embeddings:<br />
- Embeddings are numeric vector representations of text (or other data) where semantically similar items are close in vector space.<br />
- Modern embeddings (e.g., OpenAI, Cohere) produce dense vectors (512â€“4096 dims) that capture semantic similarity.</p>
<p>Why use embeddings here:<br />
- Better semantic retrieval than lexical TF-IDF (retrieves based on meaning rather than exact word overlap).<br />
- Useful for role similarity, course recommendation, and clustering tasks.</p>
<p>How we compute them in this repo:<br />
- <code>scripts/precompute_embeddings.py</code> orchestrates embeddings generation using <code>ai/openai_client.py</code>.<br />
- Process:<br />
  1. Read the cleaned CSV (<code>*.clean.csv</code>) and extract a text field to embed (e.g., <code>title</code> + <code>description</code>).<br />
  2. Batch requests to the embedding provider (OpenAI) with rate-limit and retry logic.<br />
  3. Store dense embeddings into a NumPy <code>.npy</code> file (e.g., <code>training_database.emb.npy</code>) and write a base64 string column <code>embedding</code> inside a CSV copy (<code>training_database.emb.csv</code>).</p>
<p>Implementation details and safety:<br />
- Batch the requests and respect <code>429</code> or rate limit responses using exponential backoff.<br />
- Cache embedding responses to avoid recomputation and API costs. Use stable identifiers (e.g., row hash) as cache keys.<br />
- Validate resulting vectors (no zero-norm embeddings); detect and log anomalies.</p>
<p>Embedding dimension compatibility:<br />
- Record embedding dimension in <code>*.report.json</code> and in the <code>.npy</code> metadata to ensure downstream code expects the correct shape.</p>
<h2>Vector stores and nearest-neighbor search</h2>
<p>What is a vector database / store:<br />
- A vector store indexes dense vectors to support fast nearest-neighbor searches.<br />
- Examples: FAISS, Annoy, Milvus, Pinecone, Chroma.</p>
<p>How we use vector search:<br />
- For recommendation or role similarity, query embeddings produced from user inputs and find top-k nearest vectors (courses/job descriptions) using cosine similarity.</p>
<p>Implementation options and tradeoffs:<br />
- FAISS: good for on-prem and memory-efficient ANN on CPUs/GPU.<br />
- Annoy: lightweight, disk-backed, good for read-heavy workloads.<br />
- Hosted solutions (Pinecone, Milvus cloud) remove operational burden.</p>
<p>Integration in NextHorizon:<br />
- The repo currently stores embeddings as <code>.npy</code> and an <code>embedding</code> base64 column. For production, add a small adapter to build and persist an index in FAISS or Chroma during the precompute job.<br />
- The precompute job would:<br />
  - Load <code>*.emb.npy</code> and <code>*.features.csv</code>.<br />
  - Build an ANN index (FAISS/Annoy) and persist it to disk.<br />
  - Optionally persist metadata mapping (id -&gt; CSV row) for retrieval display.</p>
<p>Serving flow (query time):<br />
  - Compute query embedding using the same embedding model.<br />
  - Query ANN index for top-k neighbors.<br />
  - Fetch metadata rows by IDs and compute final ranking heuristics.</p>
<h2>Train / Test datasets and experiment management</h2>
<p>Dataset splitting:<br />
- Use standard holdout splits (train/validation/test) or time-based splits if data has temporal structure.<br />
- For small datasets, use k-fold cross validation to get robust estimates.</p>
<p>Where files live:<br />
- Raw: <code>build_training_dataset/training_database.csv</code><br />
- Clean: <code>build_training_dataset/training_database.clean.csv</code><br />
- Features: <code>build_training_dataset/training_database.features.csv</code><br />
- Embeddings: <code>build_training_dataset/training_database.emb.npy</code> and <code>.emb.csv</code></p>
<p>Experiment tracking recommendations:<br />
- Use a lightweight runner (MLflow, Weights &amp; Biases, or even CSV logs) to capture: dataset versions, hyperparameters, metrics, and model artifacts.<br />
- Record the exact TF-IDF vocabulary and embeddings build version alongside model checkpoints for reproducibility.</p>
<h2>Prediction &amp; Recommendation Algorithms</h2>
<p>Overview of tasks:<br />
- Role prediction: given a user resume, predict next possible roles.<br />
- Skill-gap analysis: given a resume and a target role, determine missing skills and recommend learning resources.</p>
<p>Algorithms used / suggested:<br />
- Heuristic + embedding retrieval:<br />
  - Use embeddings to find similar job descriptions or courses and aggregate the most common roles or skill mentions.<br />
  - Rank by combined score: alpha * cosine_similarity + beta * heuristics (provider_rating, hours suitability).<br />
- Supervised classification (optional):<br />
  - Train a multi-class classifier on features to predict job role labels from resume-derived features and skills (requires labeled resume -&gt; role mapping).<br />
  - Models: Logistic Regression, XGBoost / LightGBM, or neural networks when data is large.<br />
- Sequence / language models for extraction &amp; suggestion:<br />
  - Use LLMs to parse resumes and produce suggested next steps using prompt-based retrieval-augmented generation (RAG) over course descriptions.</p>
<p>How NextHorizon applies them:<br />
- The repo currently focuses on semantic retrieval (embeddings + TF-IDF) combined with heuristics. The diagnostics and embeddings are used to surface candidate recommendations and compute similarity metrics.</p>
<h2>How predictions are made (high-level)</h2>
<ol>
<li>Precompute embeddings for corpus (courses or job descriptions).</li>
<li>For an input (resume text or job title), compute embedding.</li>
<li>Retrieve top-k corpus items using ANN or brute-force cosine search.</li>
<li>Aggregate results (top roles, top-k recommended courses) and compute derived signals (skill overlap, missing skills count).</li>
<li>Apply business rules and ranking adjustments (e.g., prefer high-rated providers or short-duration courses for quick wins).</li>
</ol>
<h2>Evaluation, Metrics, and Validation</h2>
<p>Key metrics:<br />
- Retrieval quality: Precision@k, Recall@k, Mean Reciprocal Rank (MRR)<br />
- Ranking quality: NDCG@k<br />
- Classification metrics (if supervised models used): accuracy, F1, confusion matrix per class<br />
- Embedding health: mean cosine similarity between randomly sampled pairs, zero-norm rate, embedding stability across re-runs</p>
<p>Validation strategy:<br />
- Hold out a test set representing real user queries.<br />
- For retrieval workflows, evaluate by constructing query -&gt; ground-truth set mappings and compute precision/recall@k.<br />
- For skill-gap and recommendations, use human evaluation when possible (collect NPS or relevance labels).</p>
<p>Testing and CI:<br />
- Unit tests validate cleaning functions, TF-IDF shapes, embedding loaders (see tests/ in repo).<br />
- Integration tests validate the end-to-end pipeline (clean -&gt; features -&gt; embeddings) but avoid calling the external embedding API in CI â€” mock the API or use cached embeddings.</p>
<h2>Serving, UI Integration, and Diagnostics</h2>
<p>Streamlit app:<br />
- Main app is <code>app.py</code> which mounts the product views and a <code>ðŸ§ª Diagnostics</code> tab implemented in <code>ui/diagnostics.py</code>.<br />
- Diagnostics shows pipeline report metadata (<code>*.report.json</code>), TF-IDF vocab sizes, top entities (from spaCy), and precompute controls.</p>
<p>Operational aspects:<br />
- The precompute scripts (<code>scripts/precompute_embeddings.py</code> and <code>scripts/precompute_features.py</code>) should be run during update windows or as scheduled jobs (cron) to refresh artifacts.<br />
- Store artifacts with versioned filenames (include timestamp or git commit hash) to avoid serving inconsistent artifacts.</p>
<h2>Sequence Diagrams</h2>
<p>Below are Mermaid sequence diagrams presenting the main flows. Save these in markdown-compatible Mermaid blocks; they render in supporting viewers or can be converted to PNG/SVG.</p>
<h3>1) Feature &amp; Embedding Precompute Flow</h3>
<div class="codehilite"><pre><span></span><code><span class="n">sequenceDiagram</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Runner</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">Precompute</span><span class="w"> </span><span class="n">Runner</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Cleaner</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">DataCleaner</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Feature</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">FeatureEngine</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">TFIDF</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">TFIDFVectorizer</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Embed</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">EmbeddingClient</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="kr">Store</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">ArtifactStore</span>

<span class="w">    </span><span class="n">Runner</span><span class="o">-&gt;&gt;</span><span class="n">Cleaner</span><span class="o">:</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="kr">CSV</span>
<span class="w">    </span><span class="n">Cleaner</span><span class="o">--&gt;&gt;</span><span class="n">Runner</span><span class="o">:</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">cleaned</span><span class="w"> </span><span class="kr">CSV</span>
<span class="w">    </span><span class="n">Runner</span><span class="o">-&gt;&gt;</span><span class="n">Feature</span><span class="o">:</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">cleaned</span><span class="w"> </span><span class="kr">CSV</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="n">Feature</span><span class="o">:</span><span class="w"> </span><span class="n">derive</span><span class="w"> </span><span class="n">numeric</span><span class="o">/</span><span class="n">categorical</span><span class="w"> </span><span class="n">features</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="n">TFIDF</span><span class="o">:</span><span class="w"> </span><span class="n">fit</span><span class="w"> </span><span class="n">vectorizer</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">text</span>
<span class="w">    </span><span class="n">TFIDF</span><span class="o">--&gt;&gt;</span><span class="n">Feature</span><span class="o">:</span><span class="w"> </span><span class="n">save</span><span class="w"> </span><span class="n">vectorizer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="n">matrix</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="n">Embed</span><span class="o">:</span><span class="w"> </span><span class="n">prepare</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">batches</span>
<span class="w">    </span><span class="n">Embed</span><span class="o">--&gt;&gt;</span><span class="n">Feature</span><span class="o">:</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="n">batch</span><span class="w"> </span><span class="n">embeddings</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="kr">Store</span><span class="o">:</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="kr">CSV</span><span class="p">,</span><span class="w"> </span><span class="n">report</span><span class="p">.</span><span class="n">json</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="kr">Store</span><span class="o">:</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">tfidf</span><span class="p">.</span><span class="n">pkl</span><span class="p">,</span><span class="w"> </span><span class="n">tfidf</span><span class="p">.</span><span class="n">npz</span>
<span class="w">    </span><span class="n">Feature</span><span class="o">-&gt;&gt;</span><span class="kr">Store</span><span class="o">:</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">emb</span><span class="p">.</span><span class="n">npy</span><span class="p">,</span><span class="w"> </span><span class="n">emb</span><span class="p">.</span><span class="kr">csv</span>

<span class="w">    </span><span class="n">Note</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">Runner</span><span class="p">,</span><span class="kr">Store</span><span class="o">:</span><span class="w"> </span><span class="n">Artifacts</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="n">serving</span>
</code></pre></div>

<p><svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 1485.5px; background-color: white;" viewBox="-50 -10 1485.5 778" role="graphics-document document" aria-roledescription="sequence"><g><rect x="1235.5" y="692" fill="#eaeaea" stroke="#666" width="150" height="65" name="Store" rx="3" ry="3" class="actor actor-bottom"/><text x="1310.5" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1310.5" dy="0">ArtifactStore</tspan></text></g><g><rect x="955" y="692" fill="#eaeaea" stroke="#666" width="155" height="65" name="Embed" rx="3" ry="3" class="actor actor-bottom"/><text x="1032.5" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1032.5" dy="0">EmbeddingClient</tspan></text></g><g><rect x="755" y="692" fill="#eaeaea" stroke="#666" width="150" height="65" name="TFIDF" rx="3" ry="3" class="actor actor-bottom"/><text x="830" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="830" dy="0">TFIDFVectorizer</tspan></text></g><g><rect x="430" y="692" fill="#eaeaea" stroke="#666" width="150" height="65" name="Feature" rx="3" ry="3" class="actor actor-bottom"/><text x="505" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="505" dy="0">FeatureEngine</tspan></text></g><g><rect x="230" y="692" fill="#eaeaea" stroke="#666" width="150" height="65" name="Cleaner" rx="3" ry="3" class="actor actor-bottom"/><text x="305" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="305" dy="0">DataCleaner</tspan></text></g><g><rect x="0" y="692" fill="#eaeaea" stroke="#666" width="180" height="65" name="Runner" rx="3" ry="3" class="actor actor-bottom"/><text x="90" y="724.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="90" dy="0">Precompute Runner</tspan></text></g><g><line id="actor5" x1="1310.5" y1="65" x2="1310.5" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Store"/><g id="root-5"><rect x="1235.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Store" rx="3" ry="3" class="actor actor-top"/><text x="1310.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1310.5" dy="0">ArtifactStore</tspan></text></g></g><g><line id="actor4" x1="1032.5" y1="65" x2="1032.5" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Embed"/><g id="root-4"><rect x="955" y="0" fill="#eaeaea" stroke="#666" width="155" height="65" name="Embed" rx="3" ry="3" class="actor actor-top"/><text x="1032.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1032.5" dy="0">EmbeddingClient</tspan></text></g></g><g><line id="actor3" x1="830" y1="65" x2="830" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="TFIDF"/><g id="root-3"><rect x="755" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="TFIDF" rx="3" ry="3" class="actor actor-top"/><text x="830" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="830" dy="0">TFIDFVectorizer</tspan></text></g></g><g><line id="actor2" x1="505" y1="65" x2="505" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Feature"/><g id="root-2"><rect x="430" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Feature" rx="3" ry="3" class="actor actor-top"/><text x="505" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="505" dy="0">FeatureEngine</tspan></text></g></g><g><line id="actor1" x1="305" y1="65" x2="305" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Cleaner"/><g id="root-1"><rect x="230" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Cleaner" rx="3" ry="3" class="actor actor-top"/><text x="305" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="305" dy="0">DataCleaner</tspan></text></g></g><g><line id="actor0" x1="90" y1="65" x2="90" y2="692" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Runner"/><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="180" height="65" name="Runner" rx="3" ry="3" class="actor actor-top"/><text x="90" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="90" dy="0">Precompute Runner</tspan></text></g></g><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg text.actor&gt;tspan{fill:black;stroke:none;}#my-svg .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .innerArc{stroke-width:1.5;stroke-dasharray:none;}#my-svg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#my-svg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#my-svg #arrowhead path{fill:#333;stroke:#333;}#my-svg .sequenceNumber{fill:white;}#my-svg #sequencenumber{fill:#333;}#my-svg #crosshead path{fill:#333;stroke:#333;}#my-svg .messageText{fill:#333;stroke:none;}#my-svg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .labelText,#my-svg .labelText&gt;tspan{fill:black;stroke:none;}#my-svg .loopText,#my-svg .loopText&gt;tspan{fill:black;stroke:none;}#my-svg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .note{stroke:#aaaa33;fill:#fff5ad;}#my-svg .noteText,#my-svg .noteText&gt;tspan{fill:black;stroke:none;}#my-svg .activation0{fill:#f4f4f4;stroke:#666;}#my-svg .activation1{fill:#f4f4f4;stroke:#666;}#my-svg .activation2{fill:#f4f4f4;stroke:#666;}#my-svg .actorPopupMenu{position:absolute;}#my-svg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#my-svg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .actor-man circle,#my-svg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g/><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"/></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"/></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"/></symbol></defs><defs><marker id="arrowhead" refX="7.9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto-start-reverse"><path d="M -1 0 L 10 5 L 0 10 z"/></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="4" refY="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"/></marker></defs><defs><marker id="filled-head" refX="15.5" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"/></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"/></marker></defs><g><rect x="65" y="633" fill="#EDF2AE" stroke="#666" width="1270.5" height="39" class="note"/><text x="700" y="638" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="700">Artifacts are now ready for model building and serving</tspan></text></g><text x="196" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">read raw CSV</text><line x1="91" y1="113" x2="301" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="199" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">write cleaned CSV</text><line x1="304" y1="161" x2="94" y2="161" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="296" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">read cleaned CSV</text><line x1="91" y1="209" x2="501" y2="209" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="506" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">derive numeric/categorical features</text><path d="M 506,257 C 566,247 566,287 506,277" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="666" y="302" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">fit vectorizer on text</text><line x1="506" y1="335" x2="826" y2="335" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="669" y="350" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">save vectorizer + sparse matrix</text><line x1="829" y1="383" x2="509" y2="383" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="767" y="398" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">prepare text batches</text><line x1="506" y1="431" x2="1028.5" y2="431" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="770" y="446" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">return batch embeddings</text><line x1="1031.5" y1="479" x2="509" y2="479" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="906" y="494" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">write features CSV, report.json</text><line x1="506" y1="527" x2="1306.5" y2="527" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="906" y="542" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">write tfidf.pkl, tfidf.npz</text><line x1="506" y1="575" x2="1306.5" y2="575" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="906" y="590" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">write emb.npy, emb.csv</text><line x1="506" y1="623" x2="1306.5" y2="623" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/></svg></p>
<h3>2) Query / Recommendation Serving Flow</h3>
<div class="codehilite"><pre><span></span><code><span class="n">sequenceDiagram</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">User</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">Streamlit</span><span class="w"> </span><span class="n">App</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Embed</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">EmbeddingClient</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="nf">Index</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">ANNIndex</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">DB</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">MetadataStore</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="nf">Rank</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">Ranker</span>

<span class="w">    </span><span class="n">User</span><span class="o">-&gt;&gt;</span><span class="n">App</span><span class="o">:</span><span class="w"> </span><span class="n">submit</span><span class="w"> </span><span class="n">resume</span><span class="w"> </span><span class="kr">or</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">text</span>
<span class="w">    </span><span class="n">App</span><span class="o">-&gt;&gt;</span><span class="n">Embed</span><span class="o">:</span><span class="w"> </span><span class="n">compute</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">embedding</span>
<span class="w">    </span><span class="n">Embed</span><span class="o">--&gt;&gt;</span><span class="n">App</span><span class="o">:</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">embedding</span>
<span class="w">    </span><span class="n">App</span><span class="o">-&gt;&gt;</span><span class="nf">Index</span><span class="o">:</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">top</span><span class="o">-</span><span class="n">k</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">cosine</span><span class="w"> </span><span class="n">similarity</span>
<span class="w">    </span><span class="nf">Index</span><span class="o">--&gt;&gt;</span><span class="n">App</span><span class="o">:</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">distances</span>
<span class="w">    </span><span class="n">App</span><span class="o">-&gt;&gt;</span><span class="n">DB</span><span class="o">:</span><span class="w"> </span><span class="nf">fetch</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">ids</span>
<span class="w">    </span><span class="n">DB</span><span class="o">--&gt;&gt;</span><span class="n">App</span><span class="o">:</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="n">course</span><span class="o">/</span><span class="n">job</span><span class="w"> </span><span class="n">metadata</span>
<span class="w">    </span><span class="n">App</span><span class="o">-&gt;&gt;</span><span class="nf">Rank</span><span class="o">:</span><span class="w"> </span><span class="n">compute</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">ranking</span><span class="w"> </span><span class="p">(</span><span class="n">similarity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">heuristics</span><span class="p">)</span>
<span class="w">    </span><span class="nf">Rank</span><span class="o">--&gt;&gt;</span><span class="n">App</span><span class="o">:</span><span class="w"> </span><span class="nf">ranked</span><span class="w"> </span><span class="n">recommendations</span>
<span class="w">    </span><span class="n">App</span><span class="o">--&gt;&gt;</span><span class="n">User</span><span class="o">:</span><span class="w"> </span><span class="n">render</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">recommendations</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="n">skill</span><span class="o">-</span><span class="n">gap</span><span class="w"> </span><span class="n">suggestions</span>
</code></pre></div>

<p><svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 1649.5px; background-color: white;" viewBox="-50 -10 1649.5 651" role="graphics-document document" aria-roledescription="sequence"><g><rect x="1399.5" y="565" fill="#eaeaea" stroke="#666" width="150" height="65" name="Rank" rx="3" ry="3" class="actor actor-bottom"/><text x="1474.5" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1474.5" dy="0">Ranker</tspan></text></g><g><rect x="1199.5" y="565" fill="#eaeaea" stroke="#666" width="150" height="65" name="DB" rx="3" ry="3" class="actor actor-bottom"/><text x="1274.5" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1274.5" dy="0">MetadataStore</tspan></text></g><g><rect x="999.5" y="565" fill="#eaeaea" stroke="#666" width="150" height="65" name="Index" rx="3" ry="3" class="actor actor-bottom"/><text x="1074.5" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1074.5" dy="0">ANNIndex</tspan></text></g><g><rect x="794.5" y="565" fill="#eaeaea" stroke="#666" width="155" height="65" name="Embed" rx="3" ry="3" class="actor actor-bottom"/><text x="872" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="872" dy="0">EmbeddingClient</tspan></text></g><g><rect x="510" y="565" fill="#eaeaea" stroke="#666" width="150" height="65" name="App" rx="3" ry="3" class="actor actor-bottom"/><text x="585" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="585" dy="0">Streamlit App</tspan></text></g><g><rect x="0" y="565" fill="#eaeaea" stroke="#666" width="150" height="65" name="User" rx="3" ry="3" class="actor actor-bottom"/><text x="75" y="597.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor5" x1="1474.5" y1="65" x2="1474.5" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Rank"/><g id="root-5"><rect x="1399.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Rank" rx="3" ry="3" class="actor actor-top"/><text x="1474.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1474.5" dy="0">Ranker</tspan></text></g></g><g><line id="actor4" x1="1274.5" y1="65" x2="1274.5" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="DB"/><g id="root-4"><rect x="1199.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="DB" rx="3" ry="3" class="actor actor-top"/><text x="1274.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1274.5" dy="0">MetadataStore</tspan></text></g></g><g><line id="actor3" x1="1074.5" y1="65" x2="1074.5" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Index"/><g id="root-3"><rect x="999.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Index" rx="3" ry="3" class="actor actor-top"/><text x="1074.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1074.5" dy="0">ANNIndex</tspan></text></g></g><g><line id="actor2" x1="872" y1="65" x2="872" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Embed"/><g id="root-2"><rect x="794.5" y="0" fill="#eaeaea" stroke="#666" width="155" height="65" name="Embed" rx="3" ry="3" class="actor actor-top"/><text x="872" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="872" dy="0">EmbeddingClient</tspan></text></g></g><g><line id="actor1" x1="585" y1="65" x2="585" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="App"/><g id="root-1"><rect x="510" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="App" rx="3" ry="3" class="actor actor-top"/><text x="585" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="585" dy="0">Streamlit App</tspan></text></g></g><g><line id="actor0" x1="75" y1="65" x2="75" y2="565" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="User"/><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="User" rx="3" ry="3" class="actor actor-top"/><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="75" dy="0">User</tspan></text></g></g><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg text.actor&gt;tspan{fill:black;stroke:none;}#my-svg .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .innerArc{stroke-width:1.5;stroke-dasharray:none;}#my-svg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#my-svg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#my-svg #arrowhead path{fill:#333;stroke:#333;}#my-svg .sequenceNumber{fill:white;}#my-svg #sequencenumber{fill:#333;}#my-svg #crosshead path{fill:#333;stroke:#333;}#my-svg .messageText{fill:#333;stroke:none;}#my-svg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .labelText,#my-svg .labelText&gt;tspan{fill:black;stroke:none;}#my-svg .loopText,#my-svg .loopText&gt;tspan{fill:black;stroke:none;}#my-svg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .note{stroke:#aaaa33;fill:#fff5ad;}#my-svg .noteText,#my-svg .noteText&gt;tspan{fill:black;stroke:none;}#my-svg .activation0{fill:#f4f4f4;stroke:#666;}#my-svg .activation1{fill:#f4f4f4;stroke:#666;}#my-svg .activation2{fill:#f4f4f4;stroke:#666;}#my-svg .actorPopupMenu{position:absolute;}#my-svg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#my-svg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .actor-man circle,#my-svg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g/><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"/></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"/></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"/></symbol></defs><defs><marker id="arrowhead" refX="7.9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto-start-reverse"><path d="M -1 0 L 10 5 L 0 10 z"/></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="4" refY="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"/></marker></defs><defs><marker id="filled-head" refX="15.5" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"/></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"/></marker></defs><text x="329" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">submit resume or query text</text><line x1="76" y1="113" x2="581" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="727" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">compute query embedding</text><line x1="586" y1="161" x2="868" y2="161" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="730" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">return query embedding</text><line x1="871" y1="209" x2="589" y2="209" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="828" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">query top-k by cosine similarity</text><line x1="586" y1="257" x2="1070.5" y2="257" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="831" y="272" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">return ids + distances</text><line x1="1073.5" y1="305" x2="589" y2="305" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="928" y="320" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">fetch metadata rows for ids</text><line x1="586" y1="353" x2="1270.5" y2="353" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="931" y="368" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">return course/job metadata</text><line x1="1273.5" y1="401" x2="589" y2="401" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="1028" y="416" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">compute final ranking (similarity + heuristics)</text><line x1="586" y1="449" x2="1470.5" y2="449" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1031" y="464" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">ranked recommendations</text><line x1="1473.5" y1="497" x2="589" y2="497" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="332" y="512" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">render top recommendations and skill-gap suggestions</text><line x1="584" y1="545" x2="79" y2="545" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/></svg></p>
<h3>3) Model Training &amp; Evaluation Flow (supervised)</h3>
<div class="codehilite"><pre><span></span><code><span class="n">sequenceDiagram</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Dataset</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Trainer</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">TrainingJob</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">MLModel</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Eval</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Evaluator</span>
<span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="n">Registry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ModelRegistry</span>

<span class="w">    </span><span class="n">Data</span><span class="o">-&gt;&gt;</span><span class="n">Trainer</span><span class="p">:</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">features</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">labels</span>
<span class="w">    </span><span class="n">Trainer</span><span class="o">-&gt;&gt;</span><span class="n">Model</span><span class="p">:</span><span class="w"> </span><span class="n">train</span><span class="p">(</span><span class="n">model_hparams</span><span class="p">)</span>
<span class="w">    </span><span class="n">Model</span><span class="o">--&gt;&gt;</span><span class="n">Trainer</span><span class="p">:</span><span class="w"> </span><span class="n">trained_model</span>
<span class="w">    </span><span class="n">Trainer</span><span class="o">-&gt;&gt;</span><span class="n">Eval</span><span class="p">:</span><span class="w"> </span><span class="n">evaluate</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">validation</span><span class="o">/</span><span class="n">test</span><span class="w"> </span><span class="n">sets</span>
<span class="w">    </span><span class="n">Eval</span><span class="o">--&gt;&gt;</span><span class="n">Trainer</span><span class="p">:</span><span class="w"> </span><span class="n">metrics</span><span class="w"> </span><span class="p">(</span><span class="n">accuracy</span><span class="p">,</span><span class="w"> </span><span class="n">F1</span><span class="p">,</span><span class="w"> </span><span class="n">NDCG</span><span class="p">)</span>
<span class="w">    </span><span class="n">Trainer</span><span class="o">-&gt;&gt;</span><span class="n">Registry</span><span class="p">:</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">report</span>
<span class="w">    </span><span class="n">Registry</span><span class="o">--&gt;&gt;</span><span class="n">Trainer</span><span class="p">:</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">id</span>

<span class="w">    </span><span class="n">Note</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">Trainer</span><span class="p">,</span><span class="n">Registry</span><span class="p">:</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">deployment</span>
</code></pre></div>

<p><svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 1187.5px; background-color: white;" viewBox="-50 -10 1187.5 556" role="graphics-document document" aria-roledescription="sequence"><g><rect x="937.5" y="470" fill="#eaeaea" stroke="#666" width="150" height="65" name="Registry" rx="3" ry="3" class="actor actor-bottom"/><text x="1012.5" y="502.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1012.5" dy="0">ModelRegistry</tspan></text></g><g><rect x="724" y="470" fill="#eaeaea" stroke="#666" width="150" height="65" name="Eval" rx="3" ry="3" class="actor actor-bottom"/><text x="799" y="502.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="799" dy="0">Evaluator</tspan></text></g><g><rect x="524" y="470" fill="#eaeaea" stroke="#666" width="150" height="65" name="Model" rx="3" ry="3" class="actor actor-bottom"/><text x="599" y="502.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="599" dy="0">MLModel</tspan></text></g><g><rect x="276" y="470" fill="#eaeaea" stroke="#666" width="150" height="65" name="Trainer" rx="3" ry="3" class="actor actor-bottom"/><text x="351" y="502.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="351" dy="0">TrainingJob</tspan></text></g><g><rect x="0" y="470" fill="#eaeaea" stroke="#666" width="150" height="65" name="Data" rx="3" ry="3" class="actor actor-bottom"/><text x="75" y="502.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="75" dy="0">Dataset</tspan></text></g><g><line id="actor4" x1="1012.5" y1="65" x2="1012.5" y2="470" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Registry"/><g id="root-4"><rect x="937.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Registry" rx="3" ry="3" class="actor actor-top"/><text x="1012.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="1012.5" dy="0">ModelRegistry</tspan></text></g></g><g><line id="actor3" x1="799" y1="65" x2="799" y2="470" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Eval"/><g id="root-3"><rect x="724" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Eval" rx="3" ry="3" class="actor actor-top"/><text x="799" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="799" dy="0">Evaluator</tspan></text></g></g><g><line id="actor2" x1="599" y1="65" x2="599" y2="470" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Model"/><g id="root-2"><rect x="524" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Model" rx="3" ry="3" class="actor actor-top"/><text x="599" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="599" dy="0">MLModel</tspan></text></g></g><g><line id="actor1" x1="351" y1="65" x2="351" y2="470" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Trainer"/><g id="root-1"><rect x="276" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Trainer" rx="3" ry="3" class="actor actor-top"/><text x="351" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="351" dy="0">TrainingJob</tspan></text></g></g><g><line id="actor0" x1="75" y1="65" x2="75" y2="470" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Data"/><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Data" rx="3" ry="3" class="actor actor-top"/><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="75" dy="0">Dataset</tspan></text></g></g><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg text.actor&gt;tspan{fill:black;stroke:none;}#my-svg .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .innerArc{stroke-width:1.5;stroke-dasharray:none;}#my-svg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#my-svg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#my-svg #arrowhead path{fill:#333;stroke:#333;}#my-svg .sequenceNumber{fill:white;}#my-svg #sequencenumber{fill:#333;}#my-svg #crosshead path{fill:#333;stroke:#333;}#my-svg .messageText{fill:#333;stroke:none;}#my-svg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .labelText,#my-svg .labelText&gt;tspan{fill:black;stroke:none;}#my-svg .loopText,#my-svg .loopText&gt;tspan{fill:black;stroke:none;}#my-svg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#my-svg .note{stroke:#aaaa33;fill:#fff5ad;}#my-svg .noteText,#my-svg .noteText&gt;tspan{fill:black;stroke:none;}#my-svg .activation0{fill:#f4f4f4;stroke:#666;}#my-svg .activation1{fill:#f4f4f4;stroke:#666;}#my-svg .activation2{fill:#f4f4f4;stroke:#666;}#my-svg .actorPopupMenu{position:absolute;}#my-svg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#my-svg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#my-svg .actor-man circle,#my-svg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g/><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"/></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"/></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"/></symbol></defs><defs><marker id="arrowhead" refX="7.9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto-start-reverse"><path d="M -1 0 L 10 5 L 0 10 z"/></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="4" refY="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"/></marker></defs><defs><marker id="filled-head" refX="15.5" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"/></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"/></marker></defs><g><rect x="326" y="411" fill="#EDF2AE" stroke="#666" width="711.5" height="39" class="note"/><text x="682" y="416" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="682">Model is now available for deployment</tspan></text></g><text x="212" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">load features.csv + labels</text><line x1="76" y1="113" x2="347" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="474" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">train(model_hparams)</text><line x1="352" y1="161" x2="595" y2="161" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="477" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">trained_model</text><line x1="598" y1="209" x2="355" y2="209" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="574" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">evaluate on validation/test sets</text><line x1="352" y1="257" x2="795" y2="257" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="577" y="272" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">metrics (accuracy, F1, NDCG)</text><line x1="798" y1="305" x2="355" y2="305" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="680" y="320" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">register model + artifacts + report</text><line x1="352" y1="353" x2="1008.5" y2="353" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="683" y="368" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">model version id</text><line x1="1011.5" y1="401" x2="355" y2="401" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/></svg></p>
<h2>Next Steps and Operational Considerations</h2>
<ul>
<li>Productionize embedding index: choose FAISS/Annoy/Chroma and add a scheduled job to rebuild indexes when embeddings change.</li>
<li>Introduce experiment tracking (MLflow/W&amp;B) to log dataset versions, TF-IDF vocab, embedding versions, and model metrics.</li>
<li>Add caching and retry logic around embedding API calls and mock the embedding service in CI.</li>
<li>Add a small health-check endpoint that returns pipeline artifact versions, last-run timestamps, and embedding index status for the ops dashboard.</li>
<li>Implement a lightweight policy for artifact TTL and re-compute cadence (e.g., weekly embeddings refresh, daily TF-IDF rebuild if new data arrives).</li>
</ul>
<h2>Appendix: File Pointers</h2>
<ul>
<li>Cleaning: <code>utils/data_cleaner.py</code>, <code>utils/data_enhancer.py</code></li>
<li>Feature pipeline runner: <code>scripts/precompute_features.py</code>, <code>utils/feature_engineering.py</code></li>
<li>Embedding compute: <code>scripts/precompute_embeddings.py</code>, <code>ai/openai_client.py</code></li>
<li>Diagnostics UI: <code>ui/diagnostics.py</code>, <code>app.py</code></li>
<li>Data: <code>build_training_dataset/</code>, <code>build_jd_dataset/</code></li>
</ul>
<hr />
<p>If you'd like, I can also:<br />
- Generate PNG exports of the Mermaid diagrams and commit them to <code>docs/diagrams/</code>.<br />
- Add a <code>Makefile</code> or <code>invoke</code> tasks to run precompute jobs, build indexes, and produce a reproducible artifact pipeline.<br />
- Create a monitoring/health-check endpoint and a short <code>systemd</code>/<code>supervisor</code> unit to run scheduled precomputes.</p>
<hr />
<p>Document generated on: 2025-11-29</p>
<h2>Quickstart: run the pipeline (examples)</h2>
<p>Below are concrete commands to run the feature precompute, embedding precompute, and build a FAISS index. Run these from the repository root.</p>
<p>Prerequisites:<br />
- Python 3.8+ and dependencies installed from <code>requirements.txt</code> (create and activate a virtualenv first).<br />
- If using embeddings via OpenAI, set <code>OPENAI_API_KEY</code> in your environment or <code>.env</code>.</p>
<p>Create and activate a venv (example):</p>
<div class="codehilite"><pre><span></span><code>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>

<p>Run precompute (features + embeddings) using the <code>Makefile</code> or scripts:</p>
<p>Using Makefile:</p>
<div class="codehilite"><pre><span></span><code>make<span class="w"> </span>precompute
</code></pre></div>

<p>Or run scripts directly:</p>
<div class="codehilite"><pre><span></span><code>./scripts/run_precompute.sh
</code></pre></div>

<p>Build ANN index (FAISS):</p>
<div class="codehilite"><pre><span></span><code>make<span class="w"> </span>index
<span class="c1"># or</span>
./scripts/build_index.sh
</code></pre></div>

<p>Inspect produced artifacts (example paths):<br />
- <code>build_training_dataset/training_database.features.csv</code><br />
- <code>build_training_dataset/training_database.tfidf.pkl</code> and <code>.tfidf.npz</code><br />
- <code>build_training_dataset/training_database.emb.npy</code> and <code>.emb.csv</code><br />
- <code>build_training_dataset/faiss.index</code></p>
<p>Notes:<br />
- The <code>scripts/build_index.sh</code> script tries to import <code>faiss</code> and will print an instruction if it's missing (<code>pip install faiss-cpu</code>). The script normalizes vectors before adding to FAISS for cosine inner-product search.<br />
- In CI, avoid calling the embedding API directly â€” mock <code>ai/openai_client.py</code> or cache embeddings and commit them to the repo for deterministic tests.</p>
<h2>CLI &amp; Script Reference</h2>
<p>Short reference for the provided scripts and functions so engineers can run components individually.</p>
<ul>
<li><code>python utils/data_cleaner.py --path &lt;csv&gt; --type training --out &lt;out_clean.csv&gt;</code>: run full cleaning on a CSV (see <code>run_full_clean</code>).</li>
<li><code>python scripts/precompute_features.py --input &lt;clean.csv&gt; --out_csv &lt;features.csv&gt; --out_prefix &lt;out_prefix&gt;</code>: runs <code>utils.feature_engineering.run_pipeline</code>.</li>
<li><code>python scripts/precompute_embeddings.py --path &lt;clean.csv&gt; --out_csv &lt;out.csv&gt; --out_npy &lt;out.npy&gt;</code>: compute embeddings and write <code>.npy</code> and a CSV with base64-encoded <code>embedding</code> column.</li>
<li><code>./scripts/run_precompute.sh</code>: convenience wrapper for feature + embeddings precompute (calls above scripts).</li>
<li><code>./scripts/build_index.sh</code>: builds FAISS index from <code>*.emb.npy</code> (if <code>faiss</code> available).</li>
</ul>
<h2>Example: nearest-neighbor lookup (FAISS + NumPy fallback)</h2>
<p>When serving a query, compute the embedding (same model used in precompute), then query the index. Below is a minimal Python example showing both FAISS-backed search and a pure-NumPy brute-force fallback.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">normalize</span>

<span class="k">def</span><span class="w"> </span><span class="nf">cosine_similarity_search</span><span class="p">(</span><span class="n">query_vec</span><span class="p">,</span> <span class="n">emb_matrix</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="c1"># emb_matrix: (N, D) numpy array, query_vec: (D,)</span>
    <span class="c1"># normalize for cosine using dot-product</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">query_vec</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">qn</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">embn</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">emb_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">sims</span> <span class="o">=</span> <span class="n">embn</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">qn</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="o">-</span><span class="n">sims</span><span class="p">)[:</span><span class="n">top_k</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ids</span><span class="p">,</span> <span class="n">sims</span><span class="p">[</span><span class="n">ids</span><span class="p">]</span>

<span class="c1"># FAISS example (preferred for large corpora)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">faiss</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">faiss_search</span><span class="p">(</span><span class="n">index_path</span><span class="p">,</span> <span class="n">query_vec</span><span class="p">,</span> <span class="n">top_k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">read_index</span><span class="p">(</span><span class="n">index_path</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">query_vec</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">faiss</span><span class="o">.</span><span class="n">normalize_L2</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
        <span class="n">D</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">idx</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">top_k</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">I</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">D</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">faiss</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1"># usage:</span>
<span class="c1"># emb_matrix = np.load(&#39;build_training_dataset/training_database.emb.npy&#39;)</span>
<span class="c1"># query_vec = get_embedding_for_text(&#39;Data engineer with ...&#39;)</span>
<span class="c1"># if faiss is not None:</span>
<span class="c1">#     ids, sims = faiss_search(&#39;build_training_dataset/faiss.index&#39;, query_vec)</span>
<span class="c1"># else:</span>
<span class="c1">#     ids, sims = cosine_similarity_search(query_vec, emb_matrix)</span>
</code></pre></div>

<h2>CI snippet: mock embedding service for tests</h2>
<p>In CI you should avoid live calls to the embedding provider. Replace <code>ai/openai_client.py</code> calls with a mocked implementation that returns deterministic vectors. Example GitHub Actions step (pseudo):</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests with mocked embeddings</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no"># Use a small test dataset committed under tests/fixtures</span>
<span class="w">    </span><span class="no">python -c &quot;from ai import openai_client; openai_client.get_embedding = lambda t: [0.01]*1536&quot;</span>
<span class="w">    </span><span class="no">pytest -q</span>
</code></pre></div>

<p>Alternatively, put a <code>tests/fixtures/embeddings.npy</code> file with precomputed embeddings and load that in unit tests.</p>
<h2>Artifact versioning and reproducibility</h2>
<ul>
<li>Store timestamps or git commit hashes in artifact filenames, e.g. <code>training_database.emb.20251129.abc123.npy</code>.</li>
<li>Persist <code>*.report.json</code> alongside the artifacts and include keys: <code>git_commit</code>, <code>generated_at</code>, <code>tfidf_vocab_size</code>, <code>embedding_dim</code>, <code>rows</code>.</li>
<li>Keep the TF-IDF vectorizer pickle aligned with the model that consumes it â€” store the vectorizer with the model snapshot when training supervised models.</li>
</ul>
<p>Example JSON additions to <code>out_prefix.report.json</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;git_commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;sha&gt;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;generated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-11-29T12:34:56Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;tfidf_vocab_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">841</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;embedding_dim&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1536</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;rows&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">354</span>
<span class="p">}</span>
</code></pre></div>

<h2>Health checks and monitoring</h2>
<ul>
<li>Add a health endpoint or small script that reports:</li>
<li><code>last_precompute_at</code> (timestamp read from report.json)</li>
<li><code>tfidf_vocab_size</code></li>
<li><code>embedding_dim</code> and <code>embeddings_present</code> boolean</li>
<li><code>faiss_index_present</code> boolean</li>
<li><code>spaCy_available</code> boolean</li>
</ul>
<p>Example health-check script (shell):</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;&#39;PY&#39;</span>
<span class="s">import json, os</span>
<span class="s">rp = &#39;build_training_dataset/training_database.report.json&#39;</span>
<span class="s">if os.path.exists(rp):</span>
<span class="s">    r = json.load(open(rp))</span>
<span class="s">    print(&#39;tfidf_vocab_size:&#39;, r.get(&#39;tfidf_vocab_size&#39;))</span>
<span class="s">    print(&#39;spacy:&#39;, r.get(&#39;spacy_model_available&#39;))</span>
<span class="s">else:</span>
<span class="s">    print(&#39;report not found&#39;)</span>
<span class="s">PY</span>
</code></pre></div>

<h2>Deployment checklist</h2>
<p>Before deploying updates to the production recommendation service:</p>
<ul>
<li>[ ] Confirm <code>training_database.emb.npy</code> and <code>faiss.index</code> are built from the same cleaned dataset and are versioned.</li>
<li>[ ] Confirm <code>tfidf.pkl</code> used at inference was generated from the same dataset version as training.</li>
<li>[ ] Validate embedding health: zero-norm vectors = 0, embedding dimension matches expected.</li>
<li>[ ] Smoke test: run a small set of known queries and check top-k outputs for sanity.</li>
<li>[ ] Rollout plan: canary small percentage of traffic, monitor relevance metrics and error rates.</li>
</ul>
<hr />
<p>This completes the final pass. If you want, I can also:<br />
- Add the small example notebook demonstrating query â†’ embedding â†’ ANN lookup using the real artifacts (I can create <code>notebooks/quick_query_example.ipynb</code>).<br />
- Extend CI with a full GitHub Actions workflow that runs a dry precompute and index build using precomputed fixtures.</p>
</body>
</html>
